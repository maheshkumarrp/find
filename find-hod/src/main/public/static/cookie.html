<form id="cookie">
    <div>
        Select initial database:
        <select name="dbselect">
            <option value="b498d1af-eba1-4b59-ac0b-672abdeeab61:philips_usa">philips_usa</option>
            <option value="b498d1af-eba1-4b59-ac0b-672abdeeab61:achieversclub">achieversclub</option>
            <option value="b498d1af-eba1-4b59-ac0b-672abdeeab61:default_index">default_index</option>
            <option value="b498d1af-eba1-4b59-ac0b-672abdeeab61:philips_cn">philips_cn</option>
            <option value="b498d1af-eba1-4b59-ac0b-672abdeeab61:meethue">meethue</option>
            <option value="b498d1af-eba1-4b59-ac0b-672abdeeab61:philips_uk">philips_uk</option>
            <option value="b498d1af-eba1-4b59-ac0b-672abdeeab61:philips_nl">philips_nl</option>
        </select>
        <input name="databases" value="" size="100">
    </div>
    <div>
        Specify extra fieldtext
        <input name="fieldtext" value="" size="100">
    </div>
</form>

<script src="bower_components/jquery/jquery.js"></script>
<script>
    $(function(){
        function setDbCookie(){
            document.cookie = 'indexes=' + encodeURIComponent($db.val())  +'; path=/';
        }

        function setFieldTextCookie() {
            document.cookie = 'fieldtext=' + encodeURIComponent($fieldtext.val()) + '; path=/';
        }

        var $form = $('#cookie').submit(function(){
            setDbCookie();
            return false;
        });
        var $db = $form.find('input[name=databases]').keyup(function(){
            setDbCookie();
        });

        $form.find('select').change(function(){
            $db.val(this.value);
            setDbCookie()
        });

        var $fieldtext = $form.find('input[name=fieldtext]').keyup(function(){
            setFieldTextCookie();
        });

        $.each(document.cookie.split(';'), function(idx, str){
            var match = /^indexes=(.*)/.exec($.trim(str));
            if (match) {
                $db.val(decodeURIComponent(match[1]))
            }
            match = /^fieldtext=(.*)/.exec($.trim(str));
            if (match) {
                $fieldtext.val(decodeURIComponent(match[1]))
            }
        })
    })
</script>
